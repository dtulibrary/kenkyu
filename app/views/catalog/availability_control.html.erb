<% if current_or_guest_user %>
  <%- 
  # Note these two forms are pretty similar but for different :methods, classes, and labels. 
  # but it was simpler to leave them seperate instead of DRYing them, got confusing trying that.
  # the data-doc-id attribute is used by our JS that converts to a checkbox/label.
  -%>  
  <% unless current_or_guest_user.document_is_chosen? document.id %>  

      <%= form_tag( availability_path( document ), :method => :put, :class => "btn_link", "data-doc-id" => document.id, :'data-present' => t('blacklight.search.available.present'), :'data-absent' => t('blacklight.search.available.absent'), :'data-inprogress' => t('blacklight.search.available.inprogress')) do %>   
        <%= submit_tag(t('blacklight.available.add.button'), :id => "btn_link_#{document.id.to_s.parameterize}", :class => "available_add") %>
      <% end %>
  
  <% else %>
  
      <%= form_tag( getit_path( document ), :method => :put, :class => "btn_link", "data-doc-id" => document.id, :'data-present' => t('blacklight.search.getit.present'), :'data-absent' => t('blacklight.search.getit.absent'), :'data-inprogress' => t('blacklight.search.getit.inprogress')) do %>  
        <%= submit_tag(t('blacklight.getit.add.button'), :id => "btn_link_#{document.id.to_s.parameterize}", :class => "getit_add") %>
      <% end %>
      
  <% end %>
<% else %>
  &nbsp;
<% end %>
